<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Batman Bat Catch</title>
<style>
  html, body {
    margin: 0; padding: 0;
    width: 100vw; height: 100vh;
    overflow: hidden;
    background: linear-gradient(135deg, #000000, #1a1a1a);
    font-family: 'Arial Black', Arial, sans-serif;
    color: #ffd700; /* Batman yellow */
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: none;
    box-sizing: border-box;
  }
  body {
    padding: env(safe-area-inset-top, 10px) env(safe-area-inset-right, 10px) env(safe-area-inset-bottom, 10px) env(safe-area-inset-left, 10px);
  }
  canvas {
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 12px;
    box-shadow: 0 0 30px #ffd700aa;
    touch-action: none;
    background: #120a30; /* dark purple */
  }
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');

  function resize() {
    const dpr = window.devicePixelRatio || 1;
    const style = getComputedStyle(document.body);
    const safeTop = parseFloat(style.paddingTop) || 10;
    const safeBottom = parseFloat(style.paddingBottom) || 10;
    const safeLeft = parseFloat(style.paddingLeft) || 10;
    const safeRight = parseFloat(style.paddingRight) || 10;

    const width = window.innerWidth - safeLeft - safeRight;
    const height = window.innerHeight - safeTop - safeBottom;

    canvas.style.width = width + 'px';
    canvas.style.height = height + 'px';

    canvas.width = width * dpr;
    canvas.height = height * dpr;

    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

    bat.y = canvas.height - 80;
    bat.targetX = Math.min(Math.max(bat.targetX, bat.radius), canvas.width - bat.radius);
    bat.x = bat.targetX;
  }
  window.addEventListener('resize', resize);

  // Bat player (a yellow bat circle with bat wings)
  const bat = {
    x: 0,
    y: 0,
    radius: 30,
    speed: 8,
    targetX: 0
  };

  // Falling balls (glowing yellow orbs)
  const balls = [];
  const ballRadius = 15;
  const ballSpeed = 3;
  const maxMissed = 5;
  let score = 0;
  let missed = 0;
  let gameOver = false;

  function spawnBall() {
    const x = Math.random() * (canvas.width - ballRadius * 2) + ballRadius;
    balls.push({ x, y: -ballRadius, radius: ballRadius });
  }
  setInterval(() => {
    if (!gameOver) spawnBall();
  }, 1200);

  function moveBat() {
    const dx = bat.targetX - bat.x;
    if (Math.abs(dx) > 1) {
      bat.x += dx * 0.25;
    }
  }

  function handleTap(e) {
    e.preventDefault();
    if (gameOver) {
      resetGame();
      return;
    }
    let x = e.touches ? e.touches[0].clientX : e.clientX;
    if (x < window.innerWidth / 2) {
      bat.targetX = Math.max(bat.x - bat.speed * 3, bat.radius);
    } else {
      bat.targetX = Math.min(bat.x + bat.speed * 3, canvas.width - bat.radius);
    }
  }
  document.addEventListener('touchstart', handleTap, { passive: false });
  document.addEventListener('mousedown', handleTap);

  function resetGame() {
    score = 0;
    missed = 0;
    balls.length = 0;
    gameOver = false;
    bat.x = canvas.width / 2;
    bat.targetX = bat.x;
  }

  function update() {
    if (gameOver) return;

    moveBat();

    for (let i = balls.length - 1; i >= 0; i--) {
      balls[i].y += ballSpeed;

      const dx = Math.abs(balls[i].x - bat.x);
      const dy = Math.abs(balls[i].y - bat.y);

      if (dx < bat.radius + balls[i].radius && dy < bat.radius + balls[i].radius) {
        balls.splice(i, 1);
        score++;
        continue;
      }

      if (balls[i].y - balls[i].radius > canvas.height) {
        balls.splice(i, 1);
        missed++;
        if (missed >= maxMissed) gameOver = true;
      }
    }
  }

  function drawBall(x, y, radius) {
    const gradient = ctx.createRadialGradient(x, y, radius * 0.3, x, y, radius);
    gradient.addColorStop(0, '#fff758'); // bright yellow center
    gradient.addColorStop(1, '#b39900'); // darker yellow edge
    ctx.fillStyle = gradient;
    ctx.shadowColor = '#ffd700';
    ctx.shadowBlur = 15;
    ctx.beginPath();
    ctx.arc(x, y, radius, 0, Math.PI * 2);
    ctx.fill();
    ctx.shadowBlur = 0;
  }

  function drawBat() {
    // Bat wings shape - black with yellow border
    ctx.fillStyle = '#000000';
    ctx.strokeStyle = '#ffd700';
    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.moveTo(bat.x - bat.radius, bat.y);
    ctx.lineTo(bat.x - bat.radius / 2, bat.y - bat.radius);
    ctx.lineTo(bat.x - bat.radius / 4, bat.y);
    ctx.lineTo(bat.x, bat.y - bat.radius / 2);
    ctx.lineTo(bat.x + bat.radius / 4, bat.y);
    ctx.lineTo(bat.x + bat.radius / 2, bat.y - bat.radius);
    ctx.lineTo(bat.x + bat.radius, bat.y);
    ctx.closePath();
    ctx.fill();
    ctx.stroke();

    // Bat body - yellow circle in center
    ctx.fillStyle = '#ffd700';
    ctx.beginPath();
    ctx.arc(bat.x, bat.y - bat.radius / 4, bat.radius / 2, 0, Math.PI * 2);
    ctx.fill();

    // Eyes - black small circles
    ctx.fillStyle = '#000';
    ctx.beginPath();
    ctx.arc(bat.x - bat.radius / 5, bat.y - bat.radius / 4, bat.radius / 10, 0, Math.PI * 2);
    ctx.arc(bat.x + bat.radius / 5, bat.y - bat.radius / 4, bat.radius / 10, 0, Math.PI * 2);
    ctx.fill();
  }

  function draw() {
    // Background dark purple gradient
    const bg = ctx.createLinearGradient(0, 0, 0, canvas.height);
    bg.addColorStop(0, '#120a30');
    bg.addColorStop(1, '#000000');
    ctx.fillStyle = bg;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Draw falling balls
    balls.forEach(b => drawBall(b.x, b.y, b.radius));

    // Draw bat player
    drawBat();

    // Score and misses
    ctx.fillStyle = '#ffd700';
    ctx.font = 'bold 28px Arial Black, Arial, sans-serif';
    ctx.textAlign = 'left';
    ctx.fillText(`Score: ${score}`, 20, 40);
    ctx.fillText(`Missed: ${missed} / ${maxMissed}`, 20, 80);

    // Game over screen
    if (gameOver) {
      ctx.fillStyle = 'rgba(0,0,0,0.8)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = '#ffd700';
      ctx.font = '36px Arial Black, Arial, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText("Too many missed balls!", canvas.width / 2, canvas.height / 2 - 20);
      ctx.fillText("Tap to try again ðŸ¦‡", canvas.width / 2, canvas.height / 2 + 40);
    }
  }

  function loop() {
    if (!gameOver) update();
    draw();
    requestAnimationFrame(loop);
  }

  // Start
  resize();
  resetGame();
  loop();
</script>

</body>
</html>

